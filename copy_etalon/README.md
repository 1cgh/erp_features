Набор скриптов копирования базы 1С.

ВНИМАНИЕ ПЕРЕД ЗАПУСКОМ НЕОБХОДИМ ВВОД ПАРАМЕТРОВ!!!

Для работы требуется утилита [MS Command Line Utilities for SQL Server (sqlcmd)](https://www.microsoft.com/en-us/download/details.aspx?id=53591)

dbcopier.bat - основной скрипт, при запуске подключается к инстансам sql-сервера, выполняет sql-скрипты, создает базу в кластере 1С
error.sql - проверяет существование базы на сервере sql, в случае отсутствия базы выдает ошибку в dbcopier.bat.
error_create.sql - в случае отсутствия базы на sql-сервере, создает её, используя переменные окружения
backup.sql - подключается к sql-серверу с эталонными базами, сниммает полную копию базы, укзанной в переменной backupdb
restore.sql - восстанавливает копию базы сделанную скриптом backup.sql

Что делает скрипт:
1. Создает бекап эталонной базы
2. Удаляет тестовую базу с кластера серверов
3. Восстанавливает тестовую базу на sql сервере из бекапа
3. Создает тестовую базу на кластере серверов

Перед запуском dbcopier.bat, необходимо указать переменные в нем:

- backupsrv - сервер, на котором расположена эталонная база
- backupdb - имя эталонной базы
- restoresrv - сервер, на который копируется эталонная база
- restoreddb - имя тестовой / пользовательской базы
- state - режим копирования forpipeline - для пайплайна, foruser - для юзера. Отличия в том, что для пайплайна не показываются вспомогательыне сообщения 
- sqluser - юзер sql базы, которая копируется
- sqlpassw - пароль sql базы, которая копируется
- v8ver - версия платформы. Необходима для пересоздания базы в кластере серверов.
- dbuser - имя администратора базы - приемника
- dbpassw - пароль администратора базы-приемника






